quarkus:
  native:
    container-build: true
    builder-image: quay.io/quarkus/ubi-quarkus-graalvmce-builder-image:jdk-21
  console:
    color: false
  log:
    console:
      enable: true
      format: "%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n"
    level: INFO
    category:
      "io.quarkus":
        level: WARN
      "org.opensearch":
        level: DEBUG

guardian:
  key: ${GUARDIAN_KEY}

bucket:
  name: ${BUCKET}
  prefix:
    raw-news: ${BUCKET_PREFIX_RAW}
    enriched-news: ${BUCKET_PREFIX_ENRICHED}

gpt:
  model: gpt-3.5-turbo
  max-tokens: 500
  key: ${GPT_KEY}
  prompt: |
    You are a strict environmental news classifier and JSON generator.
    You MUST return ONLY a valid JSON object and NOTHING else.
    ABSOLUTELY NO free text, explanations, or preambles outside the JSON block.
    
    ###############################################
    ### HARD ENUM CONSTRAINTS — DO NOT VIOLATE ###
    ###############################################
    The "topics" array MUST contain ONLY 1 or 2 elements selected EXACTLY from this list:
    
    [
      "CLIMATE_CHANGE", "RENEWABLE_ENERGY", "FOSSIL_FUELS", "AIR_POLLUTION",
      "WATER_POLLUTION", "BIODIVERSITY_LAND", "WASTE_RECYCLING", "EXTREME_EVENTS",
      "SOCIAL_RISKS", "PUBLIC_HEALTH", "FINES_SANCTIONS", "OTHER"
    ]
    
    STRICT RULES:
    - NEVER generate any topic not listed above.
    - NEVER paraphrase or invent new topics.
    - NEVER return lowercase topics.
    - If the article does not match any category, choose "OTHER".
    - Maximum 2 topics, minimum 1.
    
    Before outputting JSON: internally validate that all topics are from the allowed list.
    
    ###############################################
    ### SENTIMENT RULES ###
    ###############################################
    Sentiment classification:
    - POSITIVE: sentiment_score between 0.02 and 1.0
    - NEUTRAL: sentiment_score between -0.01 and 0.01
    - NEGATIVE: sentiment_score between -0.02 and -1.0
    
    Environmental cues:
    - NEGATIVE → wildfires, droughts, floods, pollution, biodiversity loss
    - POSITIVE → renewable progress, investments, environmental recovery
    Do NOT default to NEUTRAL unless truly no impact.
    
    ###############################################
    ### TONE ENUM ###
    ###############################################
    "tone" MUST be one of:
             - SCIENTIFIC → factual, analytical, research-based
             - ACTIVIST → warnings, advocacy, calls to action
             - DESCRIPTIVE → neutral reporting of events
    
    ###############################################
    ### OUTPUT STRUCTURE ###
    ###############################################
    Return EXACTLY this JSON object shape:
    
    {
      "title": string,                     // rewrite to 2–5 words about environmental impact
      "sentiment_label": "POSITIVE" | "NEGATIVE" | "NEUTRAL",
                           "sentiment_score": number,
      "tone": "SCIENTIFIC" | "ACTIVIST" | "DESCRIPTIVE",
                "topics": [Topic ENUM],              // 1–2 elements, only from allowed list
      "organizations": [string],           // Title Case
      "country": string,                   // ISO-3166-1 alpha-2, or "UN"
      "keywords": [string],                // Title Case
      "summary": "1-2 sentences"
    }
    
    Rules:
    - Organizations & keywords must be Title Case.
    - Country MUST be ISO-3166-1 alpha-2. If unknown → "UN".
    - NEVER output invalid codes like "UK", "EU", "USA", empty string, etc.
    
    ###############################################
    ### INPUT ###
    ###############################################
    Article title: "%s"
    Article text: "%s"
